<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
    <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">

    

    <title>
      animation-timing-function:steps | Sail 
    </title>

    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    
      <meta name="author" content="Sail">


    
    

<div id="site_search">
            <input type="text" id="local-search-input" name="q" results="0" placeholder="search my blog..." class="form-control">
            <div id="local-search-result"></div>
    </div>
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({
        google_ad_client: "ca-pub-1345496474366685",
        enable_page_level_ads: true
      });
    </script>


    <meta name="description" content="在我的另一篇博文JS撸一个时钟,是用css和js写的一个时钟。 贯宇之前也写过一篇使用canvas制作的的钟。 有兴趣可以看看。 那么如何用纯CSS也写一个呢,比如下面这样      这是我在designmodo上看到的demo,并自己重新实现了下。 有兴趣看源码,狠戳这儿  主要利用的就是animation-timing-function:steps()   animation 有八个属性 an">
<meta property="og:type" content="article">
<meta property="og:title" content="animation-timing-function:steps | Sail">
<meta property="og:url" content="http://www.sail.name/2017/04/21/steps-in-animation-timing-function/index.html">
<meta property="og:site_name" content="Sail">
<meta property="og:description" content="在我的另一篇博文JS撸一个时钟,是用css和js写的一个时钟。 贯宇之前也写过一篇使用canvas制作的的钟。 有兴趣可以看看。 那么如何用纯CSS也写一个呢,比如下面这样      这是我在designmodo上看到的demo,并自己重新实现了下。 有兴趣看源码,狠戳这儿  主要利用的就是animation-timing-function:steps()   animation 有八个属性 an">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="http://www.sail.name/img/htmlcss/step.png">
<meta property="og:image" content="http://www.sail.name/img/htmlcss/steps1.gif">
<meta property="og:image" content="http://www.sail.name/img/htmlcss/steps-tow.gif">
<meta property="og:updated_time" content="2018-12-09T10:19:58.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="animation-timing-function:steps | Sail">
<meta name="twitter:description" content="在我的另一篇博文JS撸一个时钟,是用css和js写的一个时钟。 贯宇之前也写过一篇使用canvas制作的的钟。 有兴趣可以看看。 那么如何用纯CSS也写一个呢,比如下面这样      这是我在designmodo上看到的demo,并自己重新实现了下。 有兴趣看源码,狠戳这儿  主要利用的就是animation-timing-function:steps()   animation 有八个属性 an">
<meta name="twitter:image" content="http://www.sail.name/img/htmlcss/step.png">
    
    
    
      <link rel="icon" type="image/x-icon" href="/favicon.png">
    
    <link rel="stylesheet" href="/css/uno.css">
    <link rel="stylesheet" href="/css/highlight.css">
    <link rel="stylesheet" href="/css/archive.css">
    <link rel="stylesheet" href="/css/china-social-icon.css"><!-- hexo-inject:begin --><!-- hexo-inject:end -->
</head>
<body>

    <!-- hexo-inject:begin --><!-- hexo-inject:end --><span class="mobile btn-mobile-menu">
        <i class="icon icon-list btn-mobile-menu__icon"></i>
        <i class="icon icon-x-circle btn-mobile-close__icon hidden"></i>

    </span>

    

<header class="panel-cover panel-cover--collapsed">


  <div class="panel-main">

  
    <div class="panel-main__inner panel-inverted">
    <div class="panel-main__content">

        

        <h1 class="panel-cover__title panel-title"><a href="/" title="link to homepage">Sail</a></h1>
        <hr class="panel-cover__divider">

        
        <p class="panel-cover__description">
          手在键盘敲很轻
        </p>
        <hr class="panel-cover__divider panel-cover__divider--secondary">
        

        <div class="navigation-wrapper">

          <nav class="cover-navigation cover-navigation--primary">
            <ul class="navigation">

              
                
                <li class="navigation__item"><a href="/#blog" title="" class="blog-button">首页</a></li>

              
                
                <li class="navigation__item"><a href="/about" title="" class="">关于</a></li>

              
                
                <li class="navigation__item"><a href="/archive" title="" class="">归档</a></li>

              
               <li class="navigation__item">
                    <a href="http://www.sail.name/Resource/" title="个人资源分享">Resource</a></li>

            </ul>
          </nav>
          <!-- ----------------------------
To add a new social icon simply duplicate one of the list items from below
and change the class in the <i> tag to match the desired social network
and then add your link to the <a>. Here is a full list of social network
classes that you can use:

    icon-social-500px
    icon-social-behance
    icon-social-delicious
    icon-social-designer-news
    icon-social-deviant-art
    icon-social-digg
    icon-social-dribbble
    icon-social-facebook
    icon-social-flickr
    icon-social-forrst
    icon-social-foursquare
    icon-social-github
    icon-social-google-plus
    icon-social-hi5
    icon-social-instagram
    icon-social-lastfm
    icon-social-linkedin
    icon-social-medium
    icon-social-myspace
    icon-social-path
    icon-social-pinterest
    icon-social-rdio
    icon-social-reddit
    icon-social-skype
    icon-social-spotify
    icon-social-stack-overflow
    icon-social-steam
    icon-social-stumbleupon
    icon-social-treehouse
    icon-social-tumblr
    icon-social-twitter
    icon-social-vimeo
    icon-social-xbox
    icon-social-yelp
    icon-social-youtube
    icon-social-zerply
    icon-mail

-------------------------------->

<!-- add social info here -->



<nav class="cover-navigation navigation--social">
  <ul class="navigation">
    
      <!-- Github -->
      <li class="navigation__item">
        <a href="https://github.com/iamsail" title="Huno on GitHub">
          <i class="icon icon-social-github"></i>
          <span class="label">GitHub</span>
        </a>
      </li>
    

    <!-- China social icon -->
    <!--
    
      <li class="navigation__item">
        <a href="" title="">
          <i class='icon cs-icon-douban'></i>
          <span class="label">Douban</span>
        </a>
      </li>

      <li class="navigation__item">
        <a href="" title="">
          <i class='icon cs-icon-weibo'></i>
          <span class="label">Weibo</span>
        </a>
      </li>

    -->



  </ul>
</nav>


        </div>

      </div>

    </div>

    <div class="panel-cover--overlay"></div>
  </div>
</header>

    <div class="content-wrapper">
        <div class="content-wrapper__inner entry">
            

<article class="post-container post-container--single">

  <header class="post-header">
    
    <h1 class="post-title">animation-timing-function:steps</h1>

    

    <div class="post-meta">
      <time datetime="2017-04-21" class="post-meta__date date">2017-04-21</time> 

      <span class="post-meta__tags tags">

          
            <font class="categories">
            &#8226; 分类:
            <a class="categories-link" href="/categories/HTML-CSS/">HTML&&CSS</a>
            </font>
          

          

      </span>
    </div>
    
    

  </header>

  <section id="post-content" class="article-content post">
    <p>在我的另一篇博文<a href="http://www.sail.name/2017/04/19/clock-with-CSS-and-JS/">JS撸一个时钟</a>,是用css和js写的一个时钟。</p>
<p><a href="http://garychang.cn/" target="_blank" rel="noopener">贯宇</a>之前也写过一篇<a href="http://garychang.cn/2017/01/08/canvasclock/" target="_blank" rel="noopener">使用canvas制作的的钟</a>。</p>
<p>有兴趣可以看看。</p>
<p>那么如何用纯CSS也写一个呢,比如下面这样</p>
<hr>
<iframe src="http://www.sail.name/CSS_Demo/css-clock-with-steps.html" style="width:400px;height:400px;"><br></iframe>


<hr>
<p>这是我在<a href="https://designmodo.com/demo/stepscss/index.html" target="_blank" rel="noopener">designmodo</a>上看到的demo,并自己重新实现了下。</p>
<p>有兴趣看源码,<a href="http://www.sail.name/CSS_Demo/css-clock-with-steps.html">狠戳这儿</a></p>
<p><strong> 主要利用的就是animation-timing-function:steps() </strong></p>
<hr>
<p>animation 有八个属性</p>
<p><code>animation-name</code></p>
<p>动画名称</p>
<p><code>animation-duration</code></p>
<p>动画时间</p>
<p><code>animation-timing-function</code></p>
<p>动画的过渡类型</p>
<p><code>animation-delay</code></p>
<p>动画延迟执行的时间(负数将截断动画)</p>
<p><code>animation-iteration-count</code></p>
<p>动画循环播放的次数</p>
<p><code>animation-direction</code></p>
<p>动画循环播放次数大于1次时，动画是否反向运动</p>
<p><code>animation-play-state</code></p>
<p>对象动画的状态</p>
<p><code>animation-fill-mode</code></p>
<p>对象动画时间之外的状态</p>
<hr>
<p><strong> 本文只讲解animation-timing-function 中与steps相关的部分 </strong></p>
<hr>
<p>animation-timing-function 的取值有如下几种情况</p>
<p><strong> ease </strong><br>缓解效果，等同于cubic-bezier(0.25,0.1,0.25,1.0)函数，既立方贝塞尔。</p>
<p><strong> linear </strong><br>线性效果，等同于cubic-bezier(0.0,0.0,1.0,1.0)函数。</p>
<p><strong> ease-in </strong><br>渐显效果，等同于cubic-bezier(0.42,0,1.0,1.0)函数。</p>
<p><strong> ease-out </strong><br>渐隐效果，等同于cubic-bezier(0,0,0.58,1.0)函数。</p>
<p><strong> ease-in-out </strong><br>渐显渐隐效果，等同于cubic-bezier(0.42,0,0.58,1.0)函数。</p>
<p><strong> step-start </strong><br>马上转跳到动画结束状态。</p>
<p><strong> step-end </strong><br>保持动画开始状态，直到动画执行时间结束，马上转跳到动画结束状态。</p>
<p><strong> steps(<number>[, [ start | end ] ]?) </number></strong><br>第一个参数number为指定的间隔数，即把动画分为n步阶段性展示，第二个参数默认为end，设置最后一步的状态，start为结束时的状态，end为开始时的状态，若设置与animation-fill-mode的效果冲突，而以animation-fill-mode的设置为动画结束的状态。</p>
<p><strong> cubic-bezier(<number>, <number>, <number>, <number>) </number></number></number></number></strong><br>特殊的立方贝塞尔曲线效果。</p>
<hr>
<p>让我们看看<a href="https://www.w3.org/TR/2012/WD-css3-transitions-20120403/#transition-property-property" target="_blank" rel="noopener">规范</a>里是怎么描述的</p>
<p><strong> ease </strong><br>The ease function is equivalent to cubic-bezier(0.25, 0.1, 0.25, 1.0).</p>
<p><strong> linear </strong><br>The linear function is equivalent to cubic-bezier(0.0, 0.0, 1.0, 1.0).</p>
<p><strong> ease-in </strong><br>The ease-in function is equivalent to cubic-bezier(0.42, 0, 1.0, 1.0).</p>
<p><strong> ease-out </strong><br>The ease-out function is equivalent to cubic-bezier(0, 0, 0.58, 1.0).</p>
<p><strong> ease-in-out </strong><br>The ease-in-out function is equivalent to cubic-bezier(0.42, 0, 0.58, 1.0)</p>
<p><strong> step-start </strong><br>The step-start function is equivalent to steps(1, start).</p>
<p><strong> step-end </strong><br>The step-end function is equivalent to steps(1, end).</p>
<p><strong> steps </strong><br>Specifies a stepping function, described above, taking two parameters. The first parameter specifies the number of intervals in the function. It must be a positive integer (greater than 0). The second parameter, which is optional, is either the value ‘start’ or ‘end’, and specifies the point at which the change of values occur within the interval. If the second parameter is omitted, it is given the value ‘end’.</p>
<p><strong> cubic-bezier </strong><br>Specifies a cubic-bezier curve. The four values specify points P1 and P2 of the curve as (x1, y1, x2, y2). Both x values must be in the range [0, 1] or the definition is invalid. The y values can exceed this range.<br>2.4. The ‘transition-delay’ Property</p>
<p>从规范我们知道</p>
<p><strong> step-start 等价于  steps(1, start) </strong></p>
<p>动画分成1步，动画执行时为开始左侧端点的部分为开始</p>
<p><strong> step-end   等价于  steps(1, end) </strong></p>
<p>动画分成一步，动画执行时以结尾端点为开始</p>
<hr>
<p>那steps究竟是什么呢？规范中是这样描述的</p>
<p>Specifies a stepping function, described above, taking two parameters. The first parameter specifies the number of intervals in the function. It must be a positive integer (greater than 0). The second parameter, which is optional, is either the value ‘start’ or ‘end’, and specifies the point at which the change of values occur within the interval. If the second parameter is omitted, it is given the value ‘end’</p>
<p><strong> 试着翻译下: steps函数定义了一个阶梯(阶跃)函数,有两个参数。第一个参数指定了该函数中的间隔数量。它必须是正数,也就是要大于0。第二个参数是可选的,可以取 start 和 end。指定在每个间隔的起点或是终点发生阶跃变化。默认值是end. </strong></p>
<hr>
<p>可能对start,end 比较懵逼。让我们看看下图</p>
<p><img src="/img/htmlcss/step.png" alt="step.png"></p>
<p><strong> 通过上图,可以清晰的看到第二个参数为start时,动画在每个间隔的最初就执行了。而为end时,动画在每个间隔的末尾才执行。 </strong></p>
<p>通过下面这个<a href="http://www.sail.name/CSS_Demo/steps-test-one.html">demo</a>来加深下理解。</p>
<p>有兴趣看源码,<a href="https://github.com/iamsail/CSS_Demo/blob/gh-pages/steps-test-one.html" target="_blank" rel="noopener">狠戳这儿</a>。</p>
<p><img src="/img/htmlcss/steps1.gif" alt="steps1.gif"></p>
<p>不难观察到</p>
<p><strong> step-start / steps(1, start) 在动画一开始就走到了终点 </strong></p>
<p><strong> step-end / steps(1, end) 在动画末尾才到达终点 </strong></p>
<p><strong> steps(3,start) 始终领先 steps(3,end) </strong></p>
<p><strong> ease 的消失标志着整个动画的结束 </strong></p>
<p>到这儿我们对steps()已经有了大致的了解</p>
<hr>
<p>不得不提的是</p>
<p><strong> timing-function 作用于每两个关键帧之间，而不是整个动画 </strong></p>
<p>先看<a href="http://www.sail.name/CSS_Demo/steps-test-tow.html">demo</a></p>
<p>有兴趣看源码,<a href="https://github.com/iamsail/CSS_Demo/blob/gh-pages/steps-test-tow.html" target="_blank" rel="noopener">轻戳这儿</a>。</p>
<p><img src="/img/htmlcss/steps-tow.gif" alt="steps-tow.gif"></p>
<p>通过代码讲解下</p>
<pre><code> @keyframes test {

   0%{
     transform: translateX(0px);
   }

   50%{
     transform: translateX(250px);
   }

   100%{
     transform: translateX(600px);
   }
}
</code></pre><p>上面代码中有3个关键帧,分别是在0%,50%,100%。</p>
<p>若</p>
<p><code> animation-timing-function:steps(3,start); </code></p>
<p>或者</p>
<p><code> animation-timing-function:steps(3,end); </code></p>
<p><strong> 也就是0%到50%，50%到100%,每两个关键帧之间各有三处动画跳跃。 </strong></p>
<p><strong> timing-function 作用于每两个关键帧之间，而不是整个动画 </strong></p>
<hr>
<p>上面的两个demo中的ease和liner过渡,会在每个关键帧之间插入补间动画。</p>
<p>有些效果不需要补间，只需要关键帧之间的跳跃，这时应该使用steps过渡方式。</p>
<p><strong> 关于实际场景中的应用,举个列子:用来切换雪碧图,实现状态切换。</strong></p>
<p>曾经写过一篇<a href="http://www.sail.name/2017/02/16/rotary-cube/">旋转的立方体</a>,感兴趣可以看看。</p>
<hr>
<p><strong> 参考 </strong></p>
<p><a href="https://www.w3.org/TR/2012/WD-css3-transitions-20120403/#transition-timing-function-property" target="_blank" rel="noopener">W3C CSS Transitions</a><br><a href="https://segmentfault.com/a/1190000007042048" target="_blank" rel="noopener">css动画里的steps()用法详解</a><br><a href="http://www.tuicool.com/articles/neqMVr" target="_blank" rel="noopener">CSS3 timing-function: steps() 详解</a><br><a href="http://www.cnblogs.com/aaronjs/p/4642015.html" target="_blank" rel="noopener">深入理解CSS3 Animation 帧动画</a><br><a href="https://www.zhihu.com/question/28962320" target="_blank" rel="noopener">动画如何识别关键帧和中间帧？</a></p>

  </section>

  
  
</article>


            <footer class="__share_wrapper">
    <span class="under0">
		<span class="text">关注我的微信公众号[<a href="/about/">李一二</a>]，即时看更多的文章</span>
	</span>
</footer>

<footer class="footer">
    <span class="footer__copyright">&copy; 2016-2021. | 由<a href="https://hexo.io/">Hexo</a>强力驱动 | 主题<a href="https://github.com/someus/huno">Huno</a> | <a href="https://beian.miit.gov.cn/">渝ICP备17002561号</a> | 不装弱了,我要做大佬</span>
</footer>

<script>
// 对特定页面的footer隐藏
// function find(str, aim, num) {
//    var resultIndex = str.indexOf(aim);
//    for(var i = 0; i < num - 1; i++){
//        resultIndex = str.indexOf(aim, resultIndex + 1);
//    }
//    return resultIndex;
//  }

// var __one = document.querySelector("#__one");
// var __tow = document.querySelector("#__tow");
// var __three = document.querySelector("#__three");
// var __threeIndex  = find(location.href, '/', 3);
// var __fourthIndex = find(location.href, '/', 4);
// var aimStr = '';

// if (__fourthIndex !== -1) {
//     aimStr = location.href.substring(__threeIndex + 1, __fourthIndex);
// } else if (__fourthIndex === -1) {
//     aimStr = location.href.substring(__threeIndex + 1);
// }

// switch (aimStr) {
//   case "":
//   case "#blog":
//   case "about":
//   case "archive":
//   case "categories":
//   case "tags":
//   case "page":
//     __one.style.display = "none";
//     __tow.style.display = "none";
//     __three.style.display = "none";
//     break;
// }
</script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-137711129-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-137711129-1');
</script>

        </div>
    </div>



    <!-- js files -->
    <script src="/js/jquery.min.js"></script>
    <script src="/js/main.js"></script>
    <script src="/js/scale.fix.js"></script>
    <script>

var searchFunc = function(path, search_id, content_id) {
    'use strict';
    $.ajax({
        url: path,
        dataType: "xml",
        success: function( xmlResponse ) {
            // get the contents from search data

            var datas = $( "entry", xmlResponse ).map(function() {
                return {
                    title: $( "title", this ).text(),
                    content: $("content",this).text(),
                    url: $( "link" , this).attr("href")
                };
            }).get();
            var $input = document.getElementById(search_id);
            var $resultContent = document.getElementById(content_id);
            $input.addEventListener('input', function(){
                var str='<ul class=\"search-result-list\">';
                var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
                $resultContent.innerHTML = "";
                if (this.value.trim().length <= 0) {
                    return;
                }

                // perform local searching
                datas.forEach(function(data) {
                    var isMatch = true;
                    var content_index = [];
                    var data_title = data.title.trim().toLowerCase();
                    var data_content = data.content.trim().replace(/<[^>]+>/g,"").toLowerCase();
                    var data_url = data.url;
                    var index_title = -1;
                    var index_content = -1;
                    var first_occur = -1;
                    // only match artiles with not empty titles and contents
                    if(data_title != '' && data_content != '') {
                        keywords.forEach(function(keyword, i) {
                            index_title = data_title.indexOf(keyword);
                            index_content = data_content.indexOf(keyword);
                            if( index_title < 0 && index_content < 0 ){
                                isMatch = false;
                            } else {
                                if (index_content < 0) {
                                    index_content = 0;
                                }
                                if (i == 0) {
                                    first_occur = index_content;
                                }
                            }
                        });
                    }
                    // show search results
                    if (isMatch) {

                        str += "<li><a href='"+ data_url  +"' class='search-result-title'>"+ data_title +"</a>";
                       console.log(data_url);
                        console.log("=====命中=====", data);


                        var content = data.content.trim().replace(/<[^>]+>/g,"");
                        if (first_occur >= 0) {
                            // cut out 100 characters
                            var start = first_occur - 20;
                            var end = first_occur + 80;
                            if(start < 0){
                                start = 0;
                            }
                            if(start == 0){
                                end = 100;
                            }
                            if(end > content.length){
                                end = content.length;
                            }
                            var match_content = content.substr(start, end);
                            // highlight all keywords
                            keywords.forEach(function(keyword){
                                var regS = new RegExp(keyword, "gi");
                                match_content = match_content.replace(regS, "<em class=\"search-keyword\">"+keyword+"</em>");
                            });

                            str += "<p class=\"search-result\">" + match_content +"...</p>"
                        }
                        str += "</li>";
                    }
                });
                str += "</ul>";
                $resultContent.innerHTML = str;
            });
        }
    });
};

var path = "/" + "search.xml";
searchFunc(path, 'local-search-input', 'local-search-result');
    </script>


    

    <script src="/js/awesome-toc.min.js"></script>
    <script>
        $(document).ready(function(){
            $.awesome_toc({
                overlay: true,
                contentId: "post-content",
            });
        });
    </script>


    
    
    <!--kill ie6 -->
<!--[if IE 6]>
  <script src="//letskillie6.googlecode.com/svn/trunk/2/zh_CN.js"></script>
<![endif]-->

<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ["$","$"], ["\\(","\\)"] ],
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
            processEscapes: true
        }
    });
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax();
        for (var i = 0; i < all.length; ++i)
            all[i].SourceElement().parentNode.className += ' has-jax';
    });
</script>
<script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!-- hexo-inject:begin --><!-- Begin: Injected MathJax -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config("");
</script>

<script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>

<script type="text/javascript" src="custom_mathjax_source">
</script>
<!-- End: Injected MathJax -->
<!-- hexo-inject:end -->
</body>
</html>
